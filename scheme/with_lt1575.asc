Version 4
SHEET 1 4596 6420
WIRE -3600 -512 -3680 -512
WIRE -3024 -512 -3504 -512
WIRE -672 -448 -816 -448
WIRE -80 -448 -576 -448
WIRE -48 -448 -80 -448
WIRE 80 -448 32 -448
WIRE 144 -448 80 -448
WIRE -4000 -416 -4128 -416
WIRE -3760 -416 -4000 -416
WIRE -3232 -416 -3760 -416
WIRE -3216 -416 -3232 -416
WIRE -3024 -416 -3024 -512
WIRE -3024 -416 -3120 -416
WIRE -2976 -416 -3024 -416
WIRE -2496 -416 -2976 -416
WIRE -2976 -400 -2976 -416
WIRE -4000 -368 -4000 -416
WIRE 0 -368 -80 -368
WIRE 80 -368 48 -368
WIRE 48 -336 48 -368
WIRE 48 -336 -64 -336
WIRE 64 -336 48 -336
WIRE -3680 -320 -3680 -512
WIRE -3552 -320 -3680 -320
WIRE -3232 -320 -3232 -416
WIRE -3232 -320 -3264 -320
WIRE -480 -320 -592 -320
WIRE 0 -320 0 -368
WIRE 96 -320 0 -320
WIRE -2976 -304 -2976 -336
WIRE -1984 -304 -2176 -304
WIRE -1744 -304 -1888 -304
WIRE -1680 -304 -1744 -304
WIRE -1552 -304 -1600 -304
WIRE -1456 -304 -1552 -304
WIRE -1360 -304 -1456 -304
WIRE -1216 -304 -1280 -304
WIRE -1136 -304 -1216 -304
WIRE -1056 -304 -1136 -304
WIRE -992 -304 -1056 -304
WIRE -64 -304 -64 -336
WIRE 96 -304 96 -320
WIRE -1216 -288 -1216 -304
WIRE -592 -272 -592 -320
WIRE -3584 -256 -3584 -464
WIRE -3552 -256 -3584 -256
WIRE -3200 -256 -3200 -368
WIRE -3200 -256 -3264 -256
WIRE -1904 -240 -1904 -256
WIRE -480 -240 -480 -256
WIRE -1744 -208 -1744 -240
WIRE -1552 -208 -1552 -240
WIRE -1456 -208 -1456 -240
WIRE -1136 -208 -1136 -240
WIRE -1056 -208 -1056 -240
WIRE -4000 -192 -4000 -288
WIRE -3888 -192 -4000 -192
WIRE -3680 -192 -3680 -320
WIRE -3680 -192 -3888 -192
WIRE -3552 -192 -3616 -192
WIRE -3024 -192 -3024 -416
WIRE -3024 -192 -3264 -192
WIRE -1216 -192 -1216 -224
WIRE -576 -176 -576 -208
WIRE -480 -176 -480 -192
WIRE -480 -176 -576 -176
WIRE -224 -176 -304 -176
WIRE -112 -176 -224 -176
WIRE 208 -176 144 -176
WIRE -3552 -128 -3584 -128
WIRE -3200 -128 -3264 -128
WIRE -608 -128 -608 -208
WIRE -3616 -96 -3616 -192
WIRE -2032 -96 -2064 -96
WIRE -1904 -96 -1904 -160
WIRE -1904 -96 -1952 -96
WIRE -1872 -96 -1904 -96
WIRE -1744 -96 -1776 -96
WIRE -1600 -96 -1664 -96
WIRE -3584 -80 -3584 -128
WIRE -3360 -80 -3584 -80
WIRE -384 -64 -384 -176
WIRE -3760 -48 -3760 -416
WIRE -3696 -48 -3760 -48
WIRE -3200 -48 -3200 -128
WIRE -3200 -48 -3600 -48
WIRE -3360 -16 -3360 -80
WIRE -224 -16 -224 -96
WIRE -1824 0 -1824 -32
WIRE -608 0 -608 -48
WIRE 16 0 16 -48
WIRE -3888 32 -3888 -192
WIRE -3440 32 -3888 32
WIRE -3200 32 -3200 -48
WIRE -3200 32 -3344 32
WIRE -3168 32 -3200 32
WIRE -1824 144 -1824 80
WIRE -4000 240 -4000 -192
WIRE -3968 240 -4000 240
WIRE -3840 240 -3904 240
WIRE -3744 240 -3840 240
WIRE -3568 240 -3680 240
WIRE -3456 240 -3568 240
WIRE -3232 240 -3456 240
WIRE -3232 256 -3232 240
WIRE -1824 272 -1824 224
WIRE -3456 336 -3456 304
WIRE -4128 352 -4128 -416
WIRE -3840 352 -3840 304
WIRE -3840 352 -4128 352
WIRE -3568 368 -3568 304
WIRE -3296 496 -3296 480
WIRE -3296 496 -3376 496
WIRE -3152 496 -3152 480
WIRE -2880 496 -3152 496
WIRE -3376 512 -3376 496
WIRE -3296 512 -3296 496
WIRE -3152 512 -3152 496
WIRE -1824 512 -1840 512
WIRE -1488 512 -1536 512
WIRE -1232 512 -1488 512
WIRE -3376 608 -3376 576
WIRE -3296 608 -3296 592
WIRE -3152 608 -3152 576
WIRE -1824 608 -1840 608
WIRE -1488 608 -1488 512
WIRE -1488 608 -1536 608
WIRE -1232 624 -1232 512
WIRE -1824 704 -1840 704
WIRE -1280 704 -1536 704
WIRE -1232 768 -1232 720
WIRE -1216 768 -1232 768
WIRE -448 768 -480 768
WIRE -128 768 -448 768
WIRE -48 768 -128 768
WIRE -3072 800 -3248 800
WIRE -2832 800 -3008 800
WIRE -1824 800 -1872 800
WIRE -1504 800 -1536 800
WIRE -1456 800 -1504 800
WIRE -1344 800 -1376 800
WIRE -1504 816 -1504 800
WIRE -1344 816 -1344 800
WIRE -128 832 -128 768
WIRE -16 832 -80 832
WIRE -80 848 -80 832
WIRE -448 864 -448 832
WIRE -1504 896 -1504 880
WIRE -1344 896 -1344 880
WIRE -80 912 -80 896
WIRE -48 912 -80 912
WIRE -16 912 -48 912
WIRE -4128 928 -4128 352
WIRE -3904 928 -4128 928
WIRE -3776 928 -3840 928
WIRE -3680 928 -3776 928
WIRE -3504 928 -3616 928
WIRE -3360 928 -3504 928
WIRE -3184 928 -3360 928
WIRE -2832 928 -2832 800
WIRE -2832 928 -2896 928
WIRE -2736 928 -2832 928
WIRE -2640 928 -2736 928
WIRE -2400 928 -2640 928
WIRE -128 928 -128 912
WIRE -48 944 -48 912
WIRE -3360 976 -3360 928
WIRE -2736 976 -2736 928
WIRE -2640 976 -2640 928
WIRE -3248 1024 -3248 800
WIRE -3184 1024 -3248 1024
WIRE -2832 1024 -2832 928
WIRE -2832 1024 -2896 1024
WIRE -1872 1024 -1872 800
WIRE -1216 1024 -1216 992
WIRE -1216 1024 -1872 1024
WIRE -1136 1024 -1216 1024
WIRE -944 1024 -1056 1024
WIRE -832 1024 -864 1024
WIRE -4000 1040 -4000 240
WIRE -3776 1040 -3776 992
WIRE -3776 1040 -4000 1040
WIRE -1216 1040 -1216 1024
WIRE -3504 1056 -3504 992
WIRE -3360 1072 -3360 1040
WIRE -2736 1072 -2736 1040
WIRE -2640 1072 -2640 1040
WIRE -2640 1072 -2736 1072
WIRE -1216 1136 -1216 1120
WIRE -3040 1152 -3040 1088
WIRE -2736 1152 -2736 1072
FLAG -448 864 0
FLAG -1216 1136 0
FLAG -1344 896 0
FLAG -1504 896 0
FLAG -1840 512 0
FLAG -1840 704 0
FLAG -48 768 OUT
IOPIN -48 768 Out
FLAG -1824 272 0
FLAG -1552 -208 0
FLAG -1136 -208 0
FLAG -1056 -208 0
FLAG -992 -304 BUCK
IOPIN -992 -304 In
FLAG 2416 1424 0
FLAG -4336 -784 0
FLAG -224 -16 0
FLAG -384 -64 CSENSE
FLAG -816 -448 MOSOUT
IOPIN -816 -448 Out
FLAG 16 0 0
FLAG 208 -176 V+
FLAG -2880 496 V+
FLAG -2400 928 V-
FLAG -1872 1024 VREF
IOPIN -1872 1024 In
FLAG -1216 768 MOSOUT
IOPIN -1216 768 Out
FLAG -1216 912 OUT
IOPIN -1216 912 Out
FLAG 144 -448 SHUNT_OUT
IOPIN 144 -448 Out
FLAG -480 768 SHUNT_OUT
IOPIN -480 768 Out
FLAG -624 -240 V-
FLAG -560 -240 V+
FLAG -608 0 0
FLAG -48 944 0
FLAG -128 1008 0
FLAG -1232 512 BUCK
IOPIN -1232 512 In
FLAG -1840 608 V+
FLAG -832 1024 0
FLAG -3296 608 0
FLAG -3376 608 0
FLAG -3152 608 0
FLAG -2976 -304 0
FLAG -3168 32 0
FLAG -3040 1152 0
FLAG -2736 1152 0
FLAG -3568 368 0
FLAG -3504 1056 0
FLAG -3360 1072 0
FLAG -2496 -416 VRECT
IOPIN -2496 -416 Out
FLAG -2176 -304 VRECT
IOPIN -2176 -304 Out
FLAG -3456 336 0
FLAG -1216 -192 0
FLAG -1600 -96 0
FLAG -2064 -96 V+
FLAG -1744 -208 0
FLAG -1456 -208 0
SYMBOL nmos -1280 624 R0
SYMATTR InstName M1
SYMATTR Value IRFZ24
SYMBOL cap -464 768 R0
SYMATTR InstName C1
SYMATTR Value 30µ
SYMBOL res -1232 896 R0
SYMATTR InstName R1
SYMATTR Value 5000
SYMBOL res -1232 1024 R0
SYMATTR InstName R2
SYMATTR Value 741.1083889499029
SYMBOL cap -1520 816 R0
SYMATTR InstName C2
SYMATTR Value 10p
SYMBOL res -1472 816 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R3
SYMATTR Value 7.5K
SYMBOL cap -1360 816 R0
SYMATTR InstName C3
SYMATTR Value 1000p
SYMBOL LT1575 -1680 656 R0
SYMATTR InstName U1
SYMBOL voltage -1824 128 R0
WINDOW 3 -137 206 Left 2
WINDOW 123 39 113 Left 2
WINDOW 39 0 0 Left 2
WINDOW 0 38 64 Left 2
SYMATTR Value PULSE(0 5 0 0 0 0.000006 0.00001)
SYMATTR InstName V3
SYMBOL ind -1696 -288 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L1
SYMATTR Value 150µ
SYMATTR SpiceLine Rser=0.11
SYMBOL cap -1568 -304 R0
SYMATTR InstName C4
SYMATTR Value 1000µ
SYMATTR SpiceLine Rser=0.04
SYMBOL cap -1152 -304 R0
WINDOW 0 27 15 Left 2
WINDOW 3 29 51 Left 2
SYMATTR InstName C5
SYMATTR Value 10µ
SYMATTR SpiceLine Rser=0.004
SYMBOL cap -1072 -304 R0
WINDOW 0 24 15 Left 2
WINDOW 3 24 50 Left 2
SYMATTR InstName C6
SYMATTR Value 10µ
SYMATTR SpiceLine Rser=0.004
SYMBOL ind -1376 -288 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L2
SYMATTR Value 15µ
SYMATTR SpiceLine Rser=0.05
SYMBOL res -64 -432 R270
WINDOW 0 49 54 VTop 2
WINDOW 3 -7 54 VBottom 2
SYMATTR InstName SHUNT
SYMATTR Value 0.02
SYMBOL res -240 -192 R0
SYMATTR InstName R7
SYMATTR Value 4.99k
SYMBOL res -96 -464 R0
SYMATTR InstName R8
SYMATTR Value 100
SYMBOL res 64 -464 R0
WINDOW 3 36 84 Left 2
SYMATTR Value 100
SYMATTR InstName R9
SYMBOL PowerProducts\\LT6105 16 -176 M0
WINDOW 0 -2 -62 Center 2
SYMATTR InstName U2
SYMBOL nmos -672 -400 R270
SYMATTR InstName M3
SYMATTR Value IRFZ44V
SYMBOL Opamps\\LT1365 -528 -240 M270
WINDOW 0 28 32 Left 2
SYMATTR InstName U5
SYMBOL voltage -608 -144 M0
WINDOW 123 24 72 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 -74 -39 VRight 2
WINDOW 0 55 40 VRight 2
SYMATTR Value PULSE(3.01 0.1 0.0015)
SYMATTR InstName V7
SYMBOL res -608 -416 R0
SYMATTR InstName R6
SYMATTR Value 10
SYMBOL res -464 -336 M0
SYMATTR InstName R10
SYMATTR Value 100
SYMBOL cap -464 -256 M0
SYMATTR InstName C8
SYMATTR Value 10n
SYMBOL res -288 -192 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R11
SYMATTR Value 3k
SYMBOL voltage -16 816 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V2
SYMATTR Value PULSE(5 5 1.5m 0 0 5m)
SYMBOL res -144 912 R0
SYMATTR InstName R12
SYMATTR Value 1.6
SYMBOL sw -128 928 R180
SYMATTR InstName S1
SYMATTR Value MYSW
SYMBOL res -1040 1008 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R15
SYMATTR Value 986.3945578
SYMBOL voltage -960 1024 R270
WINDOW 123 24 44 Left 2
WINDOW 39 24 68 Left 2
SYMATTR SpiceLine Rser=0
SYMATTR InstName V1
SYMATTR Value PULSE(0.1 2.0 1m 5m)
SYMBOL PowerProducts\\LT3082 -3232 368 R0
SYMATTR InstName U3
SYMBOL cap -3392 512 R0
SYMATTR InstName C9
SYMATTR Value .01µ
SYMBOL res -3312 496 R0
SYMATTR InstName R17
SYMATTR Value 2.4MEG
SYMBOL cap -3168 512 R0
SYMATTR InstName C10
SYMATTR Value 2.2µ
SYMATTR SpiceLine Rser=0.01
SYMBOL cap -3824 304 R180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C11
SYMATTR Value 1000µ
SYMATTR SpiceLine Rser=0.1
SYMBOL cap -3552 304 R180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C12
SYMATTR Value 1000µ
SYMATTR SpiceLine Rser=0.1
SYMBOL schottky -3744 256 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D1
SYMATTR Value BAT54
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL cap -2992 -400 R0
SYMATTR InstName C13
SYMATTR Value 20000µ
SYMBOL voltage -4000 -384 R0
WINDOW 123 24 138 Left 2
WINDOW 39 24 117 Left 2
SYMATTR SpiceLine Rser=.01
SYMATTR InstName V8
SYMATTR Value SINE(0 21 50)
SYMBOL LT4320 -3408 -224 R0
SYMATTR InstName U6
SYMBOL nmos -3504 -464 M270
WINDOW 0 70 46 VLeft 2
WINDOW 3 -13 66 VLeft 2
SYMATTR InstName Q1
SYMATTR Value IPP084N06L3
SYMBOL nmos -3120 -368 M270
WINDOW 0 64 46 VLeft 2
WINDOW 3 -17 70 VLeft 2
SYMATTR InstName Q2
SYMATTR Value IPP084N06L3
SYMBOL nmos -3440 -16 M90
WINDOW 0 -15 65 VLeft 2
WINDOW 3 57 58 VTop 2
SYMATTR InstName Q3
SYMATTR Value IPP084N06L3
SYMBOL nmos -3696 -96 M90
WINDOW 0 -12 62 VLeft 2
WINDOW 3 52 46 VTop 2
SYMATTR InstName Q4
SYMATTR Value IPP084N06L3
SYMBOL PowerProducts\\LT1964-BYP -3040 976 R0
SYMATTR InstName U8
SYMBOL cap -2720 1040 R180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C17
SYMATTR Value 200µ
SYMATTR SpiceLine Rser=0.1
SYMBOL diode -3968 256 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D2
SYMBOL cap -3760 992 R180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C18
SYMATTR Value 200µ
SYMATTR SpiceLine Rser=0.1
SYMBOL cap -3488 992 R180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C19
SYMATTR Value 200µ
SYMATTR SpiceLine Rser=0.1
SYMBOL diode -3616 912 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D3
SYMATTR Value 1N4148
SYMBOL diode -3840 912 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D4
SYMATTR Value 1N4148
SYMBOL cap -3008 784 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C20
SYMATTR Value 10n
SYMATTR SpiceLine Rser=0.004
SYMBOL cap -2656 976 R0
SYMATTR InstName C21
SYMATTR Value 10µ
SYMATTR SpiceLine Rser=0.004
SYMBOL cap -3376 976 R0
SYMATTR InstName C22
SYMATTR Value 10µ
SYMATTR SpiceLine Rser=0.004
SYMBOL cap -3472 240 R0
SYMATTR InstName C23
SYMATTR Value 10µ
SYMATTR SpiceLine Rser=0.004
SYMBOL cap -1232 -288 R0
SYMATTR InstName C7
SYMATTR Value 5000µ
SYMBOL npn -1872 -32 R270
SYMATTR InstName Q5
SYMATTR Value 2N3904
SYMBOL res -1840 -16 R0
SYMATTR InstName R14
SYMATTR Value 1k
SYMBOL res -2048 -80 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R4
SYMATTR Value 10k
SYMBOL res -1920 -256 R0
SYMATTR InstName R18
SYMATTR Value 1k
SYMBOL nmos -1984 -256 R270
SYMATTR InstName M2
SYMATTR Value Si5410DU
SYMBOL schottky -1728 -240 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D5
SYMATTR Value PDS5100
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL res -1648 -112 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 1k
SYMBOL cap -1472 -304 R0
WINDOW 0 24 15 Left 2
WINDOW 3 24 50 Left 2
SYMATTR InstName C14
SYMATTR Value 10µ
SYMATTR SpiceLine Rser=0.004
TEXT 88 1240 Left 2 !.tran 1
TEXT -304 1112 Left 2 !.model MYSW SW(Ron=0.01 Roff=1000k Vt=.00001 Vh=0)
TEXT -2144 -512 Left 2 ;TODO: NPN-PNP BJT
RECTANGLE Normal -1024 192 -2288 -464 2
